<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vidrace ‚Äì Find Viral Clips</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color: white;
}

header {
  padding: 60px 20px;
  text-align: center;
}

header h1 {
  font-size: 42px;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

input {
  width: 100%;
  padding: 14px;
  border-radius: 10px;
  border: none;
  margin-bottom: 10px;
}

button {
  padding: 10px 14px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: bold;
}

.primary { background:#ff9800; }
.save-btn { background:#2196f3; color:white; }
.delete-btn { background:red; color:white; }

.tabs button {
  margin-right: 8px;
  margin-top: 10px;
}

.card {
  background: rgba(255,255,255,.1);
  padding: 20px;
  border-radius: 14px;
  margin-top: 15px;
}

.hidden { display:none; }

.rank {
  font-size: 20px;
  font-weight: bold;
}

.best { color:#4caf50; }

select {
  padding: 8px;
  border-radius: 6px;
  margin-top: 8px;
}
</style>
</head>

<body>

<header>
  <h1>üé¨ Vidrace</h1>
  <p>Describe a moment. Find the clip.</p>
</header>
<div style="max-width:900px;margin:20px auto;text-align:center;">
  <div style="background:#111;padding:20px;border-radius:12px;">
    <p style="opacity:.6;font-size:14px">Advertisement</p>
  </div>
</div>
<div class="container">

<input id="query" placeholder="e.g. interview goes wrong">
<button class="primary" onclick="searchClip()">Search</button>

<div class="tabs">
  <button onclick="showTab('results')">Results</button>
  <button onclick="showTab('saved')">Saved</button>
  <button onclick="showTab('trending')">Trending</button>
  <button onclick="showTab('community')">Community</button>
</div>

<div id="results"></div>
<div id="saved" class="hidden"></div>
<div id="trending" class="hidden"></div>
<div id="community" class="hidden"></div>

</div>

<script>
/* PLATFORMS */
const platforms = {
  youtube: q => "https://www.youtube.com/results?search_query="+encodeURIComponent(q),
  tiktok: q => "https://www.tiktok.com/search?q="+encodeURIComponent(q),
  instagram: q => "https://www.google.com/search?q="+encodeURIComponent("site:instagram.com "+q),
  facebook: q => "https://www.google.com/search?q="+encodeURIComponent("site:facebook.com "+q),
  x: q => "https://twitter.com/search?q="+encodeURIComponent(q)
};

/* AI SORTING */
function aiRanking(q){
  q=q.toLowerCase();
  if(q.includes("dance")||q.includes("funny")||q.includes("prank"))
    return ["tiktok","youtube","instagram","facebook","x"];
  if(q.includes("interview")||q.includes("podcast"))
    return ["youtube","x","facebook","instagram","tiktok"];
  return ["youtube","tiktok","instagram","facebook","x"];
}

/* SEARCH */
function searchClip(){
  const q=document.getElementById("query").value.trim();
  if(!q) return;

  const ranked=aiRanking(q);
  let html="<h2>Results</h2>";

  ranked.forEach((p,i)=>{
    html+=`
    <div class="card">
      <div class="rank ${i===0?'best':''}">
        #${i+1} ${p.toUpperCase()} ${i===0?'(BEST)':''}
      </div>

      ${p==="youtube" ? `
      <iframe width="100%" height="220"
      src="https://www.youtube.com/embed?listType=search&list=${encodeURIComponent(q)}"
      style="border-radius:12px;margin-top:10px"></iframe>` : ``}

      <select onchange="openLink(this.value,'${q}')">
        <option>Open on</option>
        ${Object.keys(platforms).map(x=>`<option value="${x}">${x}</option>`).join("")}
      </select>

      <button class="save-btn" onclick="saveClip('${q}')">Save</button>
    </div>`;
  });

  results.innerHTML=html;
  showTab("results");
}

/* OPEN LINK */
function openLink(p,q){
  if(!p) return;
  window.open(platforms[p](q),'_blank');
}

/* SAVED */
function saveClip(q){
  const s=JSON.parse(localStorage.getItem("saved")||"[]");
  if(!s.includes(q)) s.push(q);
  localStorage.setItem("saved",JSON.stringify(s));
  loadSaved();
}

function deleteClip(i){
  const s=JSON.parse(localStorage.getItem("saved"));
  s.splice(i,1);
  localStorage.setItem("saved",JSON.stringify(s));
  loadSaved();
}

function loadSaved(){
  const s=JSON.parse(localStorage.getItem("saved")||"[]");
  let html="<h2>Saved</h2>";
  s.forEach((q,i)=>{
    html+=`
    <div class="card">
      <b>${q}</b>
      <iframe width="100%" height="200"
      src="https://www.youtube.com/embed?listType=search&list=${encodeURIComponent(q)}"
      style="border-radius:12px;margin-top:10px"></iframe>

      <select onchange="openLink(this.value,'${q}')">
        <option>Find again</option>
        ${Object.keys(platforms).map(p=>`<option value="${p}">${p}</option>`).join("")}
      </select>

      <button class="delete-btn" onclick="deleteClip(${i})">Delete</button>
    </div>`;
  });
  saved.innerHTML=html;
}

/* TRENDING */
function loadTrending(){
  const t=[
    "celebrity falls on stage",
    "funny zoom fail",
    "insane goal reaction",
    "interview goes wrong",
    "crowd goes wild"
  ];
  let html="<h2>Trending</h2>";
  t.forEach(q=>{
    html+=`
    <div class="card">
      <b>${q}</b>
      <iframe width="100%" height="200"
      src="https://www.youtube.com/embed?listType=search&list=${encodeURIComponent(q)}"
      style="border-radius:12px;margin-top:10px"></iframe>
    </div>`;
  });
  trending.innerHTML=html;
}

/* COMMUNITY */
function loadCommunity(){
  const c=JSON.parse(localStorage.getItem("community")||"[]");
  let html=`
  <h2>üåç Community Clips</h2>
  <div class="card">
    <input id="cDesc" placeholder="Clip description">
    <input id="cLink" placeholder="Video link">
    <button class="save-btn" onclick="submitClip()">Submit</button>
  </div>`;
  c.forEach((x,i)=>{
    html+=`
    <div class="card">
      <b>${x.desc}</b><br><br>
      <a href="${x.link}" target="_blank">‚ñ∂ Watch</a>
      <button class="delete-btn" onclick="deleteCommunity(${i})">Delete</button>
    </div>`;
  });
  community.innerHTML=html;
}

function submitClip(){
  const d=cDesc.value.trim();
  const l=cLink.value.trim();
  if(!d||!l) return alert("Fill everything");
  const c=JSON.parse(localStorage.getItem("community")||"[]");
  c.unshift({desc:d,link:l});
  localStorage.setItem("community",JSON.stringify(c));
  loadCommunity();
}

function deleteCommunity(i){
  const c=JSON.parse(localStorage.getItem("community"));
  c.splice(i,1);
  localStorage.setItem("community",JSON.stringify(c));
  loadCommunity();
}

/* TABS */
function showTab(tab){
  ["results","saved","trending","community"].forEach(t=>{
    document.getElementById(t).classList.add("hidden");
  });
  document.getElementById(tab).classList.remove("hidden");
}

/* INIT */
loadSaved();
loadTrending();
loadCommunity();
</script>

</body>
</html>
